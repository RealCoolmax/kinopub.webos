(this["webpackJsonpkinopub.webos"]=this["webpackJsonpkinopub.webos"]||[]).push([[24],{1089:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var c=n(61),r=n(2),a=n(979),u=n(889),o=n(104),i=n(193),l=n.n(i),s=n(31),b=n(51),j=n.n(b),d=n(893),f=n(6),O=n(3),v=function(e){var t=e.collection,n=e.className,c=Object(s.h)(),a=Object(r.useCallback)((function(){(null===t||void 0===t?void 0:t.id)&&c.push(Object(f.b)(f.a.Collection,{collectionId:t.id}),{collection:t,title:t.title})}),[t,c]);return Object(O.jsx)(d.a,{onClick:a,source:null===t||void 0===t?void 0:t.posters.medium,caption:null===t||void 0===t?void 0:t.title,className:j()("h-72",n)})},m=n(890),h=n(892),p=function(e){var t=e.title,n=e.collections,c=e.loading,r=e.onScrollToEnd,a=e.scrollable,u=void 0===a||a,i=Object(O.jsxs)("div",{children:[Object(O.jsx)(h.a,{title:t}),Object(O.jsxs)("div",{className:"flex flex-wrap pr-2",children:[l()(n,(function(e){return Object(O.jsx)(v,{collection:e},e.id)})),c&&l()(Object(o.a)(new Array(15)),(function(e,t){return Object(O.jsx)(v,{},t)}))]})]});return u?Object(O.jsx)(m.b,{onScrollToEnd:r,children:i}):i},x=n(942),N=function(e){var t=e.queryResult,n=e.processItems,r=Object(x.a)(t,n),a=Object(c.a)(r,3),u=a[0],o=a[1],i=a[2];return Object(O.jsx)(p,{collections:u,loading:o,onScrollToEnd:i})},g=n(926),w=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(g.a)("collections",[n,"watchers-"]),l=Object(r.useCallback)((function(e){o(e)}),[o]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{title:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0438"}),Object(O.jsx)("div",{className:"m-1 mb-3 mr-2",children:Object(O.jsx)(a.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438...",value:n,onChange:l})}),Object(O.jsx)(N,{queryResult:i})]})}},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(11),r=n(894),a=n(3),u=function(e){return Object(a.jsx)(r.a,Object(c.a)({defaultTitle:"Unknown",titleTemplate:"%s | Kinopub WebOS"},e))}},890:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return O}));var c=n(11),r=n(56),a=n(2),u=n(51),o=n.n(u),i=n(61),l=n(105),s=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{disconnectOnLeave:!1},r=t.onEnterViewport,u=t.onLeaveViewport,o=Object(a.useState)(),s=Object(i.a)(o,2),b=s[1],j=Object(a.useRef)(null),d=Object(a.useRef)(!1),f=Object(a.useRef)(!1),O=Object(a.useRef)(0),v=Object(a.useRef)(0),m=Object(a.useCallback)((function(){if(e.current&&j.current){var t=Object(l.findDOMNode)(e.current);t&&j.current.observe(t)}}),[e,j]),h=Object(a.useCallback)((function(){if(e.current&&j.current){var t=Object(l.findDOMNode)(e.current);t&&(j.current.unobserve(t),j.current.disconnect(),j.current=null)}}),[e,j]),p=Object(a.useCallback)((function(e){var t=e[0]||{},n=t.isIntersecting,a=t.intersectionRatio,o="undefined"!==typeof n?n:a>0;if(!f.current&&o)return f.current=!0,null===r||void 0===r||r(),O.current+=1,d.current=o,void b(o);f.current&&!o&&(f.current=!1,null===u||void 0===u||u(),c.disconnectOnLeave&&j.current&&j.current.disconnect(),v.current+=1,d.current=o,b(o))}),[j,c.disconnectOnLeave,r,u]),x=Object(a.useCallback)((function(){j.current||(j.current=new IntersectionObserver(p,n))}),[j,n,p]);return Object(a.useEffect)((function(){return x(),m(),function(){h()}}),[x,m,h]),{inViewport:d.current,enterCount:O.current,leaveCount:v.current}},b=n(1085);var j=function(e){var t=Object(b.a)();return Object(a.useMemo)((function(){return"".concat(e,"-").concat(t)}),[e,t])},d=n(3),f=["children","className","onScrollToEnd"],O=Object(a.createContext)({}),v=function(e){var t=e.children,n=e.className,u=e.onScrollToEnd,i=Object(r.a)(e,f),l=Object(a.useRef)(null),b=j("scrollable"),v=Object(a.useMemo)((function(){return{id:b}}),[b]);return s(l,{onEnterViewport:u}),Object(d.jsxs)("div",Object(c.a)(Object(c.a)({className:o()("overflow-y-auto h-full",n)},i),{},{id:b,children:[Object(d.jsx)(O.Provider,{value:v,children:t}),u&&Object(d.jsx)("div",{className:"h-40",ref:l})]}))}},892:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(11),r=n(56),a=n(51),u=n.n(a),o=n(253),i=n(3),l=["title","className"],s=function(e){var t=e.title,n=e.className,a=Object(r.a)(e,l);return t?Object(i.jsx)(o.a,Object(c.a)(Object(c.a)({},a),{},{className:u()("m-1 mb-3",n),children:t})):null}},893:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var c=n(11),r=n(56),a=n(51),u=n.n(a),o=n(2),i=n(913),l=n.n(i),s=n(890),b=n(3),j=function(e){var t=Object(o.useContext)(s.a).id;return Object(b.jsx)(l.a,Object(c.a)(Object(c.a)({once:!0,offset:100,scrollContainer:t&&"#".concat(t)},e),{},{placeholder:Object(b.jsx)("div",{className:"w-full h-full"})}))};var d=j,f=n(251),O=["className","wrapperClassName","source","caption","children"],v=function(e){var t=e.className,n=e.wrapperClassName,a=e.source,o=e.caption,i=e.children,l=Object(r.a)(e,O);return Object(b.jsxs)(f.a,Object(c.a)(Object(c.a)({},l),{},{className:u()("rounded-xl w-1/5 cursor-pointer",n),children:[Object(b.jsxs)(d,{className:u()("h-40 m-1 flex flex-col relative",t),children:[Object(b.jsx)("img",{loading:"lazy",className:"w-full h-full object-cover rounded-xl border-2 border-gray-300 bg-gray-300",src:a,alt:o}),i]}),o&&Object(b.jsx)("div",{className:"px-2",children:Object(b.jsx)("p",{className:"text-gray-200 text-sm text-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:o})})]}))}},926:function(e,t,n){"use strict";var c=n(11),r=n(104),a=n(2),u=n(953),o=n(252);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=Object(a.useMemo)((function(){return new o.c}),[]),l=Object(u.a)([e].concat(Object(r.a)(t)),(function(n){var c=n.pageParam;return i[e].apply(i,Object(r.a)(t).concat([c]))}),Object(c.a)({getNextPageParam:function(e){var t;return(null===e||void 0===e||null===(t=e.pagination)||void 0===t?void 0:t.current)+1||1}},n));return l}},942:function(e,t,n){"use strict";var c=n(61),r=n(2),a=n(897),u=n.n(a),o=n(932),i=n.n(o),l=n(911),s=n.n(l);t.a=function(e,t){var n=e.data,a=e.isLoading,o=e.isFetchingNextPage,l=e.fetchNextPage,b=Object(r.useState)(!1),j=Object(c.a)(b,2),d=j[0],f=j[1],O=Object(r.useMemo)((function(){return s()(u()(i()(null===n||void 0===n?void 0:n.pages,(function(e){return e.items}))),"id")}),[null===n||void 0===n?void 0:n.pages]),v=Object(r.useMemo)((function(){return t?t(O):O}),[O,t]),m=Object(r.useCallback)((function(){d&&(l(),f(!1))}),[d,l]);return Object(r.useEffect)((function(){f(!0)}),[O.length]),[v,a||o,m]}},979:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(11),r=n(56),a=n(2),u=n(105),o=n(997),i=n.n(o),l=n(51),s=n.n(l),b=n(3),j=["className","onChange","autoFocus"],d=function(e){var t=e.className,n=e.onChange,o=e.autoFocus,l=Object(r.a)(e,j),d=Object(a.useRef)(null),f=Object(a.useCallback)((function(e){var t=e.value;null===n||void 0===n||n(t)}),[n]);return Object(a.useEffect)((function(){var e;return o&&(e=requestAnimationFrame((function(){var e,t=Object(u.findDOMNode)(d.current);null===t||void 0===t||null===(e=t.querySelector("input"))||void 0===e||e.focus()}))),function(){e&&cancelAnimationFrame(e)}}),[d,o]),Object(b.jsx)(i.a,Object(c.a)(Object(c.a)({},l),{},{ref:d,className:s()("w-full",t),onChange:f}))}}}]);
//# sourceMappingURL=24.44756376.chunk.js.map